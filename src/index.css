@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

html,
body,
#root {
  height: 100%;
}

/* ê³µí†µ ë°”ë”” ìŠ¤íƒ€ì¼ */
body {
  margin: 0;
  overflow: hidden; /* âœ… ë¸Œë¼ìš°ì € ì „ì²´ ìŠ¤í¬ë¡¤ ë§‰ê¸° */
  @apply bg-softbg text-slate-900;
  font-family: 'Pretendard Variable', system-ui, -apple-system,
    BlinkMacSystemFont, 'Segoe UI', sans-serif;
  font-weight: 500; /* ë„ˆë¬´ ì—°í•˜ë©´ 500ìœ¼ë¡œ ë°”ê¿”ë³´ê¸° */
}

/* Pediary í—¤ë” ì „ìš© í°íŠ¸ */
.pediary-heading {
  font-family: 'Pretendard Variable', system-ui, -apple-system,
  BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

@keyframes fade-in-down {
  from {
    opacity: 0;
    transform: translate(-50%, -20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

.animate-fade-in-down {
  animation: fade-in-down 0.25s ease-out;
}

/* ì •ë ¬ ìœ í‹¸ */
.wiki-align-left {
  text-align: left;
  white-space: pre-line;
}
.wiki-align-center {
  text-align: center;
  white-space: pre-line;
}
.wiki-align-right {
  text-align: right;
  white-space: pre-line;
}
.wiki-align-justify {
  text-align: justify;
  white-space: pre-line;
}

/* ìœ„í‚¤ ë‚´ë¶€ ë§í¬ ìŠ¤íƒ€ì¼ (Toast UI ë³´ë‹¤ ë” ì„¸ê²Œ) */
.toastui-editor-contents a {
  color: #2563eb;
  text-decoration: none !important;
  font-weight: 600;
}

.toastui-editor-contents a:hover {
  text-decoration: none;
  color: #1d4ed8;
}

/* ===========================
   Toast UI Editor ê³µí†µ ë ˆì´ì•„ì›ƒ
   =========================== */

/* ë£¨íŠ¸ ì»¨í…Œì´ë„ˆ: í­ 100%, ê°€ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€ */
.tui-editor-defaultUI,
.toastui-editor-defaultUI {
  width: 100% !important;
  min-width: 0 !important;
  overflow-x: hidden !important;
}

/* ì—ë””í„° ë‚´ë¶€ main ì˜ì—­ë„ 100% */
.tui-editor-defaultUI .te-editor,
.toastui-editor-defaultUI .toastui-editor-main {
  width: 100% !important;
  max-width: 100% !important;
}

/* WYSIWYG ì»¨í…Œì´ë„ˆ */
.tui-editor-defaultUI .te-ww-container,
.toastui-editor-defaultUI .toastui-editor-ww-container {
  width: 100% !important;
  max-width: 100% !important;
}

/* ë³¸ë¬¸ ì»¨í…ì¸ ë„ ì¹´ë“œ í­ ì•ˆìœ¼ë¡œ */
.tui-editor-contents,
.toastui-editor-contents {
  max-width: 100% !important;
}

/* ë³¸ë¬¸ í—¤ë” ë²ˆí˜¸ ìƒ‰ */
:root {
  --wiki-heading-number-color: #536ea8;
}
.wiki-heading-number {
  color: var(--wiki-heading-number-color);
  font-weight: 600;
}

/* ğŸ”¹ íˆ´ë°” sticky + ê·¸ë¦¼ì */
.toastui-editor-defaultUI-toolbar {
  position: sticky;
  top: 0;
  z-index: 20;
  background-color: #ffffff;
  border-bottom: 1px solid rgba(226, 232, 240, 0.9); /* slate-200 ëŠë‚Œ */
  box-shadow: 0 2px 4px rgba(15, 23, 42, 0.04);
}

/* ë³¸ë¬¸ì€ íˆ´ë°”ë³´ë‹¤ ì•„ë˜ ë ˆì´ì–´ */
.toastui-editor-main {
  position: relative;
  z-index: 0;
}

/* ë£¨íŠ¸ê°€ stickyë¥¼ ì˜ ë™ì‘í•˜ê²Œ â€“ ìˆ˜ì§ì€ visible, ê°€ë¡œëŠ” ìœ„ì—ì„œ hidden ì²˜ë¦¬ */
.toastui-editor-defaultUI {
  overflow-y: visible !important;
}

/* Toast UI Editor / Viewerë„ Pretendard ì‚¬ìš© */
.toastui-editor-contents,
.toastui-editor-ww-container,
.toastui-editor-defaultUI,
.tui-editor-contents {
  font-family: 'Pretendard Variable', system-ui, -apple-system,
    BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
}

/* ===========================
   í…Œë§ˆ í† í°
   =========================== */

.app-shell[data-theme='light'] {
  --color-bg-app: #f3f4f8;
  --color-bg-header: rgba(255, 255, 255, 0.9);

  --color-surface: #ffffff;
  --color-surface-elevated: #ffffff;

  --color-border-subtle: rgba(148, 163, 184, 0.35);

  --color-text-main: #0f172a;
  --color-text-muted: #6b7280;          /* ğŸ”¹ ì„œë¸Œ í…ìŠ¤íŠ¸ */

  --color-badge-muted-bg: #e5e7eb;      /* ğŸ”¹ ê¸°ë³¸ ë°°ì§€ ë°°ê²½ */
  --color-badge-muted-fg: #6b7280;      /* ğŸ”¹ ê¸°ë³¸ ë°°ì§€ í…ìŠ¤íŠ¸ */

  --wiki-heading-number-color: #536ea8; /* ğŸ”¹ ë¬¸ì„œ ì œëª© ë²ˆí˜¸ ìƒ‰ */
}

.app-shell[data-theme='dark'] {
  --color-bg-app: #020617;
  --color-bg-header: rgba(15, 23, 42, 0.92);

  --color-surface: #020617;
  --color-surface-elevated: #020617;

  --color-border-subtle: rgba(148, 163, 184, 0.45);

  --color-text-main: #e5e7eb;
  --color-text-muted: #9ca3af;

  --color-badge-muted-bg: #111827;
  --color-badge-muted-fg: #e5e7eb;

  --wiki-heading-number-color: #9ca3af;
}

/* app ë£¨íŠ¸ */
.app-shell {
  background-color: var(--color-bg-app);
  color: var(--color-text-main);
}

/* í—¤ë” ê³µí†µ ìŠ¤íƒ€ì¼ */
.app-header {
  background-color: var(--color-bg-header);
  border-bottom: 1px solid var(--color-border-subtle);
  backdrop-filter: blur(12px);
}

/* íŒ¨ë„/ì¹´ë“œ ê³µí†µ */
.panel-surface {
  background-color: var(--color-surface-elevated);
  border-color: var(--color-border-subtle);
}

/* ì‚¬ì´ë“œë°” ê³ ì • ì˜ì—­ ë°°ê²½ */
.bg-surface-elevated\/80 {
  background-color: color-mix(in srgb, var(--color-surface-elevated) 80%, transparent);
}

/* ===========================
   í˜ì´ì§€/ì¹´ë“œ ê³µí†µ ìœ í‹¸ë¦¬í‹°
   =========================== */

@layer components {
  /* ë©”ì¸ ì¹´ë“œ (ì „ì²´ ë¬¸ì„œ, íœ´ì§€í†µ ê°™ì€ í° ì¹´ë“œ) */
  .page-card {
    @apply rounded-2xl shadow-soft border;
    background-color: var(--color-surface-elevated);
    border-color: var(--color-border-subtle);
    color: var(--color-text-main);
  }

  .page-card-body {
    @apply p-3 sm:p-4;
  }

  .page-text-main {
    color: var(--color-text-main);
  }

  .page-text-muted {
    color: var(--color-text-muted);
  }

  /* ë¦¬ìŠ¤íŠ¸ í–‰ ê³µí†µ ìŠ¤íƒ€ì¼ */
  .page-list-item {
    @apply rounded-xl border px-3 py-2;
    border-color: var(--color-border-subtle);
    background-color: transparent;
  }

  .page-list-item-hover {
    @apply hover:bg-primary-50;
  }

  /* ê¸°ë³¸ íšŒìƒ‰ ë°°ì§€ (ì¹œêµ¬ ê³µê°œ ë§ê³  ë‚˜ë¨¸ì§€) */
  .badge-muted {
    @apply inline-flex items-center rounded-full px-2 py-[2px] text-[10px];
    background-color: var(--color-badge-muted-bg);
    color: var(--color-badge-muted-fg);
  }
}

/* Toast UI Editor / Viewer - í‘œ ìŠ¤íƒ€ì¼ */
.toastui-editor-contents table,
.tui-editor-contents table {
  width: 100%;           /* ê°€ë¡œ ê½‰ ì°¨ê²Œ */
  table-layout: fixed;
  border-collapse: collapse;
}

.toastui-editor-contents th,
.toastui-editor-contents td,
.tui-editor-contents th,
.tui-editor-contents td {
  min-width: 80px;
  padding: 4px 6px;
}

/* í—¤ë” ë°°ê²½/ê¸€ììƒ‰ */
.toastui-editor-contents th,
.tui-editor-contents th {
  background-color: #e5e7eb; /* tailwind slate-200 ì •ë„ */
  color: #111827;            /* slate-900 */
  font-weight: 600;
}

/* ===========================
   ì¹´í…Œê³ ë¦¬ íŠ¸ë¦¬ ë¼ì¸
   =========================== */

.tree-line {
  position: absolute;
  left: 0.4rem;
  top: 0;
  bottom: 0;
  border-left: 1px dashed #e2e8f0;
}

.tree-line-last {
  position: absolute;
  left: 0.4rem;
  top: 0;
  bottom: 50%;
  border-left: 1px dashed #e2e8f0;
}

.tree-branch {
  position: absolute;
  left: 0.4rem;
  top: 50%;
  width: 0.8rem;
  border-top: 1px dashed #e2e8f0;
  transform: translateY(-0.5px);
}

/* ===========================
   ëª¨ë°”ì¼ìš© ë ˆì´ì•„ì›ƒ ë³´ì •
   =========================== */

@media (max-width: 640px) {
  /* ë¬¸ì„œ ë©”ì¸ ì¹´ë“œ */
  .wiki-doc-main-card {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box;
  }

  .wiki-doc-main-card > div {
    max-width: 100% !important;
    box-sizing: border-box;
  }

  /* Toast UI Editor ê°€ë¡œ ì˜ë¦¼ ë°©ì§€ */
  .toastui-editor-defaultUI {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box;
  }

  .toastui-editor-defaultUI .toastui-editor-main,
  .toastui-editor-defaultUI .toastui-editor-ww-container,
  .toastui-editor-contents,
  .tui-editor-contents {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box;
  }

  /* íˆ´ë°” ë²„íŠ¼ì´ ë„ˆë¬´ ê¸¸ì–´ì§ˆ ë•Œ ì¤„ë°”ê¿ˆ í—ˆìš© */
  .toastui-editor-defaultUI-toolbar {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    row-gap: 4px;
  }

  .toastui-editor-defaultUI-toolbar .toastui-editor-toolbar-group {
    flex-wrap: wrap;
  }
}
